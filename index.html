<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NyxOraculum</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: radial-gradient(circle, #1A1A2E, #0F0F1A);
            color: #E6E6FA;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
            position: relative;
        }

        /* –¢—É–º–∞–Ω –Ω–∞ –∑–∞–¥–Ω–µ–º —Ñ–æ–Ω–µ */
        .fog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><filter id="fogFilter"><feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="5" stitchTiles="stitch"/><feColorMatrix type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.1 0"/></filter><rect width="100%" height="100%" filter="url(%23fogFilter)" opacity="0.3"/></svg>');
            pointer-events: none;
            z-index: -1;
            animation: fogMovement 60s linear infinite;
        }

        @keyframes fogMovement {
            0% { background-position: 0 0; }
            100% { background-position: 1000px 1000px; }
        }

        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –Ω–∏–∂–µ */

        .telekinesis-target {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
            z-index: 2;
        }

        .telekinesis-object {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #8A2BE2;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: transform 0.1s ease;
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.7);
            z-index: 3;
        }
    </style>
</head>
<body>
    <!-- –î–æ–±–∞–≤–ª—è–µ–º —Ç—É–º–∞–Ω -->
    <div class="fog"></div>

    <!-- –û—Å—Ç–∞–ª—å–Ω–∞—è HTML-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π -->

    <script>
        // –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥ –¥–ª—è —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞
        function initTelekinesis() {
            const area = document.getElementById('telekinesis-area');
            const object = document.getElementById('telekinesis-object');
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é —Ü–µ–ª—å, –µ—Å–ª–∏ –µ—Å—Ç—å
            const oldTarget = document.querySelector('.telekinesis-target');
            if (oldTarget) oldTarget.remove();
            
            // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Ü–µ–ª—å
            const target = document.createElement('div');
            target.className = 'telekinesis-target';
            area.appendChild(target);
            
            // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —Ü–µ–ª—å —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
            const rect = area.getBoundingClientRect();
            const maxX = rect.width - 60;
            const maxY = rect.height - 60;
            
            const targetX = Math.floor(Math.random() * maxX);
            const targetY = Math.floor(Math.random() * maxY);
            
            target.style.left = targetX + 'px';
            target.style.top = targetY + 'px';
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç –≤ —Ü–µ–Ω—Ç—Ä
            object.style.left = '50%';
            object.style.top = '50%';
            
            let isDragging = false;
            let startX, startY, startLeft, startTop;

            // –î–ª—è –º—ã—à–∏
            object.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);

            // –î–ª—è —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            object.addEventListener('touchstart', startDrag);
            document.addEventListener('touchmove', drag);
            document.addEventListener('touchend', stopDrag);

            function startDrag(e) {
                e.preventDefault();
                isDragging = true;
                
                const rect = area.getBoundingClientRect();
                const objRect = object.getBoundingClientRect();
                
                if (e.type === 'mousedown') {
                    startX = e.clientX;
                    startY = e.clientY;
                } else {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                }
                
                startLeft = objRect.left - rect.left;
                startTop = objRect.top - rect.top;
            }

            function drag(e) {
                if (!isDragging) return;
                e.preventDefault();
                
                const rect = area.getBoundingClientRect();
                let clientX, clientY;
                
                if (e.type === 'mousemove') {
                    clientX = e.clientX;
                    clientY = e.clientY;
                } else {
                    clientX = e.touches[0].clientX;
                    clientY = e.touches[0].clientY;
                }
                
                let newLeft = startLeft + (clientX - startX);
                let newTop = startTop + (clientY - startY);
                
                // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º –æ–±–ª–∞—Å—Ç–∏
                newLeft = Math.max(0, Math.min(rect.width - object.offsetWidth, newLeft));
                newTop = Math.max(0, Math.min(rect.height - object.offsetHeight, newTop));
                
                object.style.left = newLeft + 'px';
                object.style.top = newTop + 'px';
                object.style.transform = 'translate(0, 0)';
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏
                checkTargetReached(object, target);
            }

            function stopDrag() {
                if (isDragging) {
                    isDragging = false;
                    stats.telekinesis.moves++;
                    updateStats();
                    checkAchievements();
                }
            }
            
            function checkTargetReached(obj, target) {
                const objRect = obj.getBoundingClientRect();
                const targetRect = target.getBoundingClientRect();
                
                const distance = Math.sqrt(
                    Math.pow(objRect.left + objRect.width/2 - (targetRect.left + targetRect.width/2), 2) +
                    Math.pow(objRect.top + objRect.height/2 - (targetRect.top + targetRect.height/2), 2)
                );
                
                if (distance < 30) { // –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –±–ª–∏–∑–∫–æ –∫ —Ü–µ–ª–∏
                    target.style.boxShadow = '0 0 30px rgba(255, 215, 0, 1)';
                    setTimeout(() => {
                        initTelekinesis(); // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Ü–µ–ª—å
                        stats.telekinesis.success++;
                        updateStats();
                    }, 500);
                }
            }
        }

        // –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –±–∏–æ–ª–æ–∫–∞—Ü–∏–∏
        let stats = {
            telepathy: { correct: 0, total: 0 },
            zener: { correct: 0, total: 0 },
            color: { correct: 0, total: 0 },
            telekinesis: { moves: 0, success: 0 },
            dowsing: { found: 0, total: 0, wrong: 0 }
        };

        function checkDowsingCell(e) {
            const cell = e.target;
            const index = parseInt(cell.dataset.index);
            
            if (cell.classList.contains('opened')) return;
            
            cell.classList.add('opened');
            
            if (index === currentArtifactPosition) {
                cell.classList.add('found');
                cell.innerHTML = 'üíé';
                stats.dowsing.found++;
                updateStats();
                checkAchievements();
                setTimeout(() => {
                    initDowsing(); // –ù–æ–≤–∞—è –∏–≥—Ä–∞ –ø–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è
                }, 1000);
            } else {
                cell.innerHTML = '‚ùå';
                stats.dowsing.wrong++;
                updateStats();
            }
        }

        // –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('telepathy-stats').textContent = `${stats.telepathy.correct}/${stats.telepathy.total}`;
            document.getElementById('zener-stats').textContent = `${stats.zener.correct}/${stats.zener.total}`;
            document.getElementById('color-stats').textContent = `${stats.color.correct}/${stats.color.total}`;
            document.getElementById('telekinesis-stats').textContent = `${stats.telekinesis.success}/${stats.telekinesis.moves}`;
            document.getElementById('dowsing-stats').textContent = `${stats.dowsing.found}/${stats.dowsing.total} (–æ—à–∏–±–æ–∫: ${stats.dowsing.wrong})`;
        }
    </script>
</body>
</html>