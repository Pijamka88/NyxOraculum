<!-- Стили для цветовой интуиции -->
<style>
    /* Основные стили контейнера */
    .vortex-container {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin: 30px 0;
        flex-wrap: wrap;
    }

    /* Стили колбы с жидкостью */
    .vortex-flask {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        position: relative;
        cursor: pointer;
        overflow: hidden;
        box-shadow: 
            0 2px 25px rgba(0, 0, 0, 0.3),
            inset 0 0 15px rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(3px);
        border: 2px solid rgba(255, 255, 255, 0.4);
    }

    /* Контейнер для жидкости */
    .liquid-container {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 50%;
        overflow: hidden;
        border-radius: 0 0 50% 50%;
    }

    /* Анимация вихря жидкости */
    .liquid-vortex {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 200%;
        background: var(--liquid-color);
        animation: 
            vortex-rotate 15s linear infinite,
            liquid-wave 8s ease-in-out infinite;
        border-radius: 40%;
        filter: brightness(1.1);
        transform-origin: center center;
    }

    /* Вращение вихря */
    @keyframes vortex-rotate {
        0% { transform: rotate(0deg) scale(1); }
        100% { transform: rotate(360deg) scale(1); }
    }

    /* Волнообразное движение */
    @keyframes liquid-wave {
        0%, 100% { 
            transform: rotate(0deg) translateY(0) scale(1);
            border-radius: 40% 40% 60% 60%;
        }
        25% { 
            transform: rotate(0deg) translateY(-5px) scale(1.02);
            border-radius: 45% 45% 55% 55%;
        }
        50% { 
            transform: rotate(0deg) translateY(-8px) scale(1.01);
            border-radius: 50% 50% 50% 50%;
        }
        75% { 
            transform: rotate(0deg) translateY(-3px) scale(1.03);
            border-radius: 42% 42% 58% 58%;
        }
    }

    /* Эффект стекла */
    .vortex-flask::after {
        content: '';
        position: absolute;
        top: 5px;
        left: 5px;
        right: 5px;
        bottom: 5px;
        border-radius: 50%;
        box-shadow: 
            inset 0 0 20px rgba(255, 255, 255, 0.3),
            inset 0 -10px 30px rgba(0, 0, 0, 0.2);
        pointer-events: none;
    }

    /* Эффект при наведении */
    .vortex-flask:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 
            0 5px 30px rgba(0, 0, 0, 0.4),
            inset 0 0 20px rgba(255, 255, 255, 0.3);
    }

    /* Выделение активной колбы */
    .vortex-flask.active {
        border-color: #FFD700;
        box-shadow: 
            0 0 40px rgba(255, 215, 0, 0.6),
            inset 0 0 25px rgba(255, 215, 0, 0.3);
    }

    /* Цвета жидкостей */
    .vortex-flask[data-color="красный"] {
        --liquid-color: linear-gradient(135deg, #ff2400, #ff4d00);
    }
    .vortex-flask[data-color="синий"] {
        --liquid-color: linear-gradient(135deg, #0077ff, #00a2ff);
    }
    .vortex-flask[data-color="зеленый"] {
        --liquid-color: linear-gradient(135deg, #00cc00, #00e600);
    }
    .vortex-flask[data-color="желтый"] {
        --liquid-color: linear-gradient(135deg, #ffd700, #ffff00);
    }
    .vortex-flask[data-color="фиолетовый"] {
        --liquid-color: linear-gradient(135deg, #8a2be2, #9932cc);
    }
</style>

<!-- HTML структура игры -->
<div id="color" class="game-window">
    <div class="game-content active">
        <h2>Цветовая интуиция</h2>
        <p>Выберите колбу с загаданным цветом жидкости:</p>
        <div class="vortex-container" id="color-buttons">
            <div class="vortex-flask" data-color="красный" onclick="checkColor('красный')">
                <div class="liquid-container">
                    <div class="liquid-vortex"></div>
                </div>
            </div>
            <div class="vortex-flask" data-color="синий" onclick="checkColor('синий')">
                <div class="liquid-container">
                    <div class="liquid-vortex"></div>
                </div>
            </div>
            <div class="vortex-flask" data-color="зеленый" onclick="checkColor('зеленый')">
                <div class="liquid-container">
                    <div class="liquid-vortex"></div>
                </div>
            </div>
            <div class="vortex-flask" data-color="желтый" onclick="checkColor('желтый')">
                <div class="liquid-container">
                    <div class="liquid-vortex"></div>
                </div>
            </div>
            <div class="vortex-flask" data-color="фиолетовый" onclick="checkColor('фиолетовый')">
                <div class="liquid-container">
                    <div class="liquid-vortex"></div>
                </div>
            </div>
        </div>
        <button class="btn close-btn" onclick="closeGame('color')">Закрыть</button>
    </div>
</div>

<!-- JavaScript логика -->
<script>
    // Функция проверки выбранного цвета
    function checkColor(guess) {
        if (!isGameActive) return;
        
        // Снимаем выделение со всех колб
        const flasks = document.querySelectorAll('.vortex-flask');
        flasks.forEach(flask => flask.classList.remove('active'));
        
        // Добавляем выделение к выбранной колбе
        event.currentTarget.classList.add('active');
        
        // Генерируем случайный целевой цвет
        const colors = ['красный', 'синий', 'зеленый', 'желтый', 'фиолетовый'];
        const target = colors[Math.floor(Math.random() * colors.length)];
        
        // Обновляем статистику
        stats.color.total++;
        
        // Проверяем результат
        if (guess === target) {
            stats.color.correct++;
            showMessage('✅ Верно! Загадан: ' + target, resetSelection);
        } else {
            showMessage(`❌ Неверно. Загадан: ${target}`, resetSelection);
        }
        
        updateStats();
        checkAchievements();
    }

    // Сброс выделения колб
    function resetSelection() {
        setTimeout(() => {
            document.querySelectorAll('.vortex-flask').forEach(flask => {
                flask.classList.remove('active');
            });
        }, 300);
    }
</script>