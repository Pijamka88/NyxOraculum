<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NyxOraculum</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        body {
            font-family: Arial, sans-serif;
            padding: 15px;
            background: #f0f2f5;
        }
        
        .menu {
            text-align: center;
        }
        
        button {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="menu">
        <h1>üåÄ NyxOraculum</h1>
        <button onclick="startGame('telepathy')">–¢–µ–ª–µ–ø–∞—Ç–∏—è —á–∏—Å–µ–ª</button>
        <button onclick="startGame('zener')">–ö–∞—Ä—Ç—ã –ó–µ–Ω–µ—Ä–∞</button>
        <button onclick="startGame('color')">–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è</button>
        <button onclick="showStats()">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let stats = {
            telepathy: { correct: 0, total: 0 },
            zener: { correct: 0, total: 0 },
            color: { correct: 0, total: 0 }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        tg.expand();

        async function startGame(type) {
            const answer = await generateTask(type);
            const guess = await getUserGuess(type);
            
            stats[type].total++;
            if(guess === answer) {
                stats[type].correct++;
                showResult('‚úÖ –í–µ—Ä–Ω–æ!', answer);
            } else {
                showResult('‚ùå –ù–µ–≤–µ—Ä–Ω–æ', answer);
            }
        }

        async function generateTask(type) {
            // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞–Ω–∏–π
            const rand = Math.random();
            switch(type) {
                case 'telepathy': return Math.floor(rand * 10) + 1;
                case 'zener': return ['‚óã','‚ñ°','ÔΩû','‚úö','‚òÖ'][Math.floor(rand * 5)];
                case 'color': return ['red','blue','green','yellow','purple'][Math.floor(rand * 5)];
            }
        }

        function getUserGuess(type) {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è UI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
            return prompt(`–£–≥–∞–¥–∞–π—Ç–µ ${type === 'color' ? '—Ü–≤–µ—Ç' : '—Å–∏–º–≤–æ–ª/—á–∏—Å–ª–æ'}:`);
        }

        function showResult(message, answer) {
            alert(`${message}\n–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${answer}`);
        }

        function showStats() {
            let statsText = 'üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n';
            for(const [type, data] of Object.entries(stats)) {
                const percent = data.total > 0 
                    ? (data.correct/data.total*100).toFixed(1)
                    : 0;
                statsText += `\n${type}: ${data.correct}/${data.total} (${percent}%)`;
            }
            alert(statsText);
        }
    </script>
</body>
</html>