<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NyxOraculum</title>
    <style>
        :root {
            --bg-primary: #1A1A2E;
            --bg-secondary: #0F0F1A;
            --text-color: #E6E6FA;
            --accent-color: #8A2BE2;
            --accent-hover: #9932CC;
            --success-color: #4CAF50;
            --error-color: #F44336;
            --gold-color: #FFD700;
        }

        .light-mode {
            --bg-primary: #F0F0F5;
            --bg-secondary: #FFFFFF;
            --text-color: #333333;
            --accent-color: #6A0DAD;
            --accent-hover: #7B1FA2;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: radial-gradient(circle, var(--bg-primary), var(--bg-secondary);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
            transition: background 0.5s ease;
        }

        .container {
            text-align: center;
            background: rgba(26, 26, 46, 0.9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            border: 2px solid var(--accent-color);
            width: 90%;
            max-width: 400px;
            transition: all 0.5s ease;
        }

        .light-mode .container {
            background: rgba(240, 240, 245, 0.95);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--accent-color);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #00BFFF, var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 3s infinite;
            text-shadow: 0 0 10px rgba(138, 43, 226, 0.5);
        }

        @keyframes glow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .btn {
            background: rgba(138, 43, 226, 0.2);
            color: var(--text-color);
            border: 2px solid var(--accent-color);
            padding: 15px;
            margin: 10px auto;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            max-width: 300px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            background: rgba(153, 50, 204, 0.3);
            box-shadow: 0 0 15px var(--accent-hover);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 5px var(--accent-hover); }
            50% { box-shadow: 0 0 20px var(--accent-hover); }
            100% { box-shadow: 0 0 5px var(--accent-hover); }
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn img {
            width: 20px;
            height: 20px;
            filter: brightness(0) invert(var(--icon-filter, 1));
        }

        .light-mode .btn img {
            --icon-filter: 0;
        }

        .game-window {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26, 26, 46, 0.95);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            border: 2px solid var(--accent-color);
            z-index: 1000;
            width: 90%;
            max-width: 400px;
            animation: fadeIn 0.5s ease;
        }

        .light-mode .game-window {
            background: rgba(240, 240, 245, 0.95);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .game-window h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--text-color);
            text-align: center;
            text-shadow: 0 0 5px var(--accent-color);
        }

        .game-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 0 auto;
            max-width: 300px;
        }

        .game-btn {
            background: rgba(138, 43, 226, 0.2);
            color: var(--text-color);
            border: 2px solid var(--accent-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .game-btn:hover {
            background: rgba(153, 50, 204, 0.3);
            box-shadow: 0 0 10px var(--accent-hover);
        }

        .game-btn:active {
            transform: scale(0.95);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–≥—Ä... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ) */

        /* –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ */
        .dark-room {
            text-align: center;
        }

        .dark-room-input {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--accent-color);
            color: var(--text-color);
            padding: 10px;
            border-radius: 10px;
            width: 80%;
            margin: 20px auto;
            font-size: 1.2rem;
            text-align: center;
        }

        .secret-symbol {
            font-size: 3rem;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* –ê—É–¥–∏–æ-–∫–æ–Ω—Ç—Ä–æ–ª—ã */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .audio-btn {
            background: rgba(138, 43, 226, 0.5);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .audio-btn:hover {
            background: rgba(153, 50, 204, 0.7);
            transform: scale(1.1);
        }

        /* –°–µ–∫—Ä–µ—Ç–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ */
        .secret-achievement {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid var(--gold-color);
            z-index: 1001;
            text-align: center;
            max-width: 300px;
            animation: glow-gold 2s infinite alternate;
        }

        @keyframes glow-gold {
            from { box-shadow: 0 0 10px var(--gold-color); }
            to { box-shadow: 0 0 30px var(--gold-color); }
        }

        .secret-achievement img {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container" id="main-menu">
        <h1>NyxOraculum</h1>
        <button class="btn" onclick="openGame('telepathy')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/brain.png" alt="–¢–µ–ª–µ–ø–∞—Ç–∏—è">
            –¢–µ–ª–µ–ø–∞—Ç–∏—è
        </button>
        <button class="btn" onclick="openGame('zener')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/tarot-cards.png" alt="–ö–∞—Ä—Ç—ã –ó–µ–Ω–µ—Ä–∞">
            –ö–∞—Ä—Ç—ã –ó–µ–Ω–µ—Ä–∞
        </button>
        <button class="btn" onclick="openGame('color')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/color-palette.png" alt="–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è">
            –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω—Ç—É–∏—Ü–∏—è
        </button>
        <button class="btn" onclick="openGame('telekinesis')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/mind-map.png" alt="–¢–µ–ª–µ–∫–∏–Ω–µ–∑">
            –¢–µ–ª–µ–∫–∏–Ω–µ–∑
        </button>
        <button class="btn" onclick="openGame('dowsing')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/treasure-map.png" alt="–ë–∏–æ–ª–æ–∫–∞—Ü–∏—è">
            –ë–∏–æ–ª–æ–∫–∞—Ü–∏—è
        </button>
        <button class="btn" onclick="openGame('darkroom')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/door.png" alt="–¢–µ–º–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞">
            –¢–µ–º–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞
        </button>
        <button class="btn" onclick="toggleTheme()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/sun.png" alt="–¢–µ–º–∞" id="theme-icon">
            –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É
        </button>
        <button class="btn" onclick="openStats()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/statistics.png" alt="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">
            –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        </button>
        <button class="btn" onclick="openAchievements()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/trophy.png" alt="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è">
            –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        </button>
    </div>

    <!-- –ò–≥—Ä—ã (–ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–≥—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) -->

    <!-- –ù–æ–≤–∞—è –∏–≥—Ä–∞: –¢–µ–º–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ -->
    <div id="darkroom" class="game-window">
        <h2>–¢–µ–º–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞</h2>
        <p>–£–≥–∞–¥–∞–π—Ç–µ –∑–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º):</p>
        <div class="dark-room">
            <div class="secret-symbol">üîÆ</div>
            <input type="text" class="dark-room-input" id="darkroom-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ...">
            <button class="btn" onclick="checkDarkRoom()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>
        <button class="btn close-btn" onclick="closeGame('darkroom')">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <!-- –ê—É–¥–∏–æ-–∫–æ–Ω—Ç—Ä–æ–ª—ã -->
    <div class="audio-controls">
        <button class="audio-btn" onclick="toggleMusic()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/audio.png" width="24" alt="–ú—É–∑—ã–∫–∞">
        </button>
        <button class="audio-btn" onclick="toggleSounds()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/audition.png" width="24" alt="–ó–≤—É–∫–∏">
        </button>
    </div>

    <!-- –°–µ–∫—Ä–µ—Ç–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ -->
    <div id="secret-achievement" class="secret-achievement">
        <img src="https://img.icons8.com/ios-filled/100/ffffff/diamond.png" alt="–°–µ–∫—Ä–µ—Ç">
        <h3>–¢—ã –Ω–∞—à–µ–ª –≤–µ–ª–∏–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç!</h3>
        <p>–¢–µ–±–µ –æ—Ç–∫—Ä—ã—Ç—ã –≤—Å–µ —Ç–∞–π–Ω—ã –≤—Å–µ–ª–µ–Ω–Ω–æ–π üåå</p>
        <button class="btn" onclick="closeSecret()">–ü—Ä–∏–Ω—è—Ç—å –¥–∞—Ä</button>
    </div>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="success-sound">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>
    <audio id="error-sound">
        <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
    </audio>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const DARKROOM_WORDS = ["energy", "psychic", "mystic", "universe", "hidden", "secret"];
        const SECRET_ACHIEVEMENT = "–¢–∞–π–Ω—ã–π —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å";

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let state = {
            stats: {
                telepathy: { correct: 0, total: 0 },
                zener: { correct: 0, total: 0 },
                color: { correct: 0, total: 0 },
                telekinesis: { success: 0, total: 0 },
                dowsing: { found: 0, attempts: 0 },
                darkroom: { correct: 0, total: 0 }
            },
            achievements: [],
            currentArtifactPosition: -1,
            isGameActive: true,
            darkRoomWord: "",
            musicEnabled: false,
            soundsEnabled: true,
            theme: "dark"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ localStorage
            const savedState = localStorage.getItem("nyxOraculumState");
            if (savedState) {
                state = JSON.parse(savedState);
            }

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º—ã
            if (state.theme === "light") {
                document.body.classList.add("light-mode");
                document.getElementById("theme-icon").src = "https://img.icons8.com/ios-filled/50/000000/moon.png";
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º—É–∑—ã–∫–∏
            if (state.musicEnabled) {
                document.getElementById("bg-music").play();
            }

            updateStats();
            updateAchievements();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function saveState() {
            localStorage.setItem("nyxOraculumState", JSON.stringify(state));
        }

        // –¢–µ–º–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞
        function initDarkRoom() {
            state.darkRoomWord = DARKROOM_WORDS[Math.floor(Math.random() * DARKROOM_WORDS.length)];
            document.getElementById("darkroom-input").value = "";
            state.stats.darkroom.total++;
        }

        function checkDarkRoom() {
            if (!state.isGameActive) return;
            
            const guess = document.getElementById("darkroom-input").value.toLowerCase();
            if (guess === state.darkRoomWord) {
                state.stats.darkroom.correct++;
                playSound("success");
                showMessage("‚úÖ –í–µ—Ä–Ω–æ! –≠—Ç–æ –±—ã–ª–æ —Å–ª–æ–≤–æ: " + state.darkRoomWord);
                initDarkRoom();
            } else {
                playSound("error");
                showMessage("‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑");
            }
            updateStats();
            checkAchievements();
        }

        // –ê—É–¥–∏–æ
        function toggleMusic() {
            state.musicEnabled = !state.musicEnabled;
            const music = document.getElementById("bg-music");
            state.musicEnabled ? music.play() : music.pause();
            saveState();
        }

        function toggleSounds() {
            state.soundsEnabled = !state.soundsEnabled;
            saveState();
        }

        function playSound(type) {
            if (!state.soundsEnabled) return;
            const sound = document.getElementById(type + "-sound");
            sound.currentTime = 0;
            sound.play();
        }

        // –¢–µ–º–∞
        function toggleTheme() {
            state.theme = state.theme === "dark" ? "light" : "dark";
            document.body.classList.toggle("light-mode");
            const icon = document.getElementById("theme-icon");
            icon.src = state.theme === "dark" 
                ? "https://img.icons8.com/ios-filled/50/ffffff/sun.png" 
                : "https://img.icons8.com/ios-filled/50/000000/moon.png";
            saveState();
        }

        // –°–µ–∫—Ä–µ—Ç–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
        function checkSecretAchievement() {
            if (state.achievements.includes(SECRET_ACHIEVEMENT)) return;
            
            const allAchievements = [
                "–ù–æ–≤–∏—á–æ–∫ —Ç–µ–ª–µ–ø–∞—Ç–∏–∏", "–ú–∞—Å—Ç–µ—Ä –∫–∞—Ä—Ç –ó–µ–Ω–µ—Ä–∞", "–¶–≤–µ—Ç–æ–≤–æ–π –ø—Ä–æ–≤–∏–¥–µ—Ü",
                "–≠–∫—Å—Ç—Ä–∞—Å–µ–Ω—Å", "–ú–∞—Å—Ç–µ—Ä —Ç–µ–ª–µ–∫–∏–Ω–µ–∑–∞", "–ò—Å–∫–∞—Ç–µ–ª—å —Å–æ–∫—Ä–æ–≤–∏—â"
            ];
            
            if (allAchievements.every(ach => state.achievements.includes(ach))) {
                state.achievements.push(SECRET_ACHIEVEMENT);
                document.getElementById("secret-achievement").style.display = "block";
                document.getElementById("overlay").style.display = "block";
                updateAchievements();
            }
        }

        function closeSecret() {
            document.getElementById("secret-achievement").style.display = "none";
            document.getElementById("overlay").style.display = "none";
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = init;
    </script>
</body>
</html>