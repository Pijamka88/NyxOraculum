<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NyxOraculum</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: radial-gradient(circle, #1A1A2E, #0F0F1A);
            color: #E6E6FA;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
        }

        .container {
            text-align: center;
            background: rgba(26, 26, 46, 0.9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            border: 2px solid #8A2BE2;
            width: 90%;
            max-width: 400px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #00BFFF, #8A2BE2, #FF00FF, #00BFFF);
            background-size: 300% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 5s linear infinite;
        }

        @keyframes glow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .btn {
            background: rgba(138, 43, 226, 0.2);
            color: #E6E6FA;
            border: 2px solid #8A2BE2;
            padding: 15px;
            margin: 10px 0;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn:hover {
            background: rgba(153, 50, 204, 0.3);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn img {
            width: 20px;
            height: 20px;
            filter: brightness(0) invert(1);
        }

        .game-window {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26, 26, 46, 0.95);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            border: 2px solid #8A2BE2;
            z-index: 1000;
            width: 90%;
            max-width: 400px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .game-window h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #E6E6FA;
            text-align: center;
        }

        /* Стили для игры "Орел и решка" */
        .coin-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }

        .coin {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(145deg, #FFD700, #B8860B);
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s ease-out;
        }

        .coin .front, .coin .back {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .coin .front {
            background: linear-gradient(145deg, #FFD700, #B8860B);
            transform: rotateY(0deg);
        }

        .coin .back {
            background: linear-gradient(145deg, #B8860B, #FFD700);
            transform: rotateY(180deg);
        }

        .coin.flipping {
            animation: flip 2s ease-out;
        }

        @keyframes flip {
            0% { transform: rotateY(0); }
            50% { transform: rotateY(1800deg); }
            100% { transform: rotateY(3600deg); }
        }

        .coin-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        /* Стили для игры "Энергетические часы" */
        .clock-container {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            position: relative;
        }

        .clock-face {
            width: 100%;
            height: 100%;
            border: 8px solid #8A2BE2;
            border-radius: 50%;
            position: relative;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
        }

        .clock-hand {
            position: absolute;
            left: 50%;
            bottom: 50%;
            width: 4px;
            height: 80px;
            background: #E6E6FA;
            transform-origin: bottom;
            transform: translateX(-50%) rotate(0deg);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(230, 230, 250, 0.7);
        }

        .clock-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 16px;
            background: #FFD700;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .clock-target {
            position: absolute;
            top: 20px;
            left: 50%;
            width: 10px;
            height: 10px;
            background: #FF0000;
            border-radius: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        .clock-btn {
            margin-top: 20px;
        }

        /* Стили для игры "Биолокация 2.0" */
        .dowsing2-container {
            width: 100%;
            height: 300px;
            position: relative;
            margin: 20px auto;
            border: 2px dashed #8A2BE2;
            border-radius: 15px;
            overflow: hidden;
        }

        .dowsing2-map {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .dowsing2-cell {
            position: absolute;
            width: 20%;
            height: 20%;
            border: 1px solid rgba(138, 43, 226, 0.3);
            cursor: pointer;
            transition: background 0.3s;
        }

        .dowsing2-cell.water {
            background: rgba(0, 191, 255, 0.3);
        }

        .dowsing2-cell.selected {
            border: 2px solid #FFD700;
        }

        .dowsing2-cell.found {
            background: rgba(0, 255, 0, 0.3);
            animation: pulse 0.5s;
        }

        /* Стили для игры "Медитация-визуализация" */
        .meditation-container {
            width: 100%;
            height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .energy-ball {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, #8A2BE2, #4B0082);
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.7);
            margin-bottom: 20px;
            transition: all 0.1s;
            position: relative;
            overflow: hidden;
        }

        .energy-ball::after {
            content: '';
            position: absolute;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            border-radius: 50%;
            opacity: 0.3;
        }

        .energy-ball.growing {
            animation: pulse-energy 0.5s infinite alternate;
        }

        @keyframes pulse-energy {
            from { transform: scale(1); box-shadow: 0 0 30px rgba(138, 43, 226, 0.7); }
            to { transform: scale(1.1); box-shadow: 0 0 50px rgba(138, 43, 226, 0.9); }
        }

        .energy-level {
            width: 100%;
            height: 20px;
            background: rgba(138, 43, 226, 0.2);
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #8A2BE2, #00BFFF);
            border-radius: 10px;
            transition: width 0.1s;
        }

        .meditation-btn {
            margin-top: 20px;
        }

        /* Общие стили для всех игр */
        .game-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 0 auto;
            max-width: 300px;
        }

        .game-btn {
            background: rgba(138, 43, 226, 0.2);
            color: #E6E6FA;
            border: 2px solid #8A2BE2;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: background 0.3s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .game-btn:hover {
            background: rgba(153, 50, 204, 0.3);
        }

        .game-btn:active {
            transform: scale(0.95);
        }

        .close-btn, .reset-btn {
            margin-top: 30px;
            width: 100%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        /* Другие стили... */

    </style>
</head>
<body>
    <div class="container">
        <h1>NyxOraculum</h1>
        <button class="btn" onclick="openGame('telepathy')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/brain.png" alt="Телепатия">
            Телепатия
        </button>
        <button class="btn" onclick="openGame('zener')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/tarot-cards.png" alt="Карты Зенера">
            Карты Зенера
        </button>
        <button class="btn" onclick="openGame('color')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/color-palette.png" alt="Цветовая интуиция">
            Цветовая интуиция
        </button>
        <button class="btn" onclick="openGame('telekinesis')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/mind-map.png" alt="Телекинез">
            Телекинез
        </button>
        <button class="btn" onclick="openGame('dowsing')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/treasure-map.png" alt="Биолокация">
            Биолокация
        </button>
        <button class="btn" onclick="openGame('coin')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/coin.png" alt="Орел и решка">
            Орел и решка
        </button>
        <button class="btn" onclick="openGame('clock')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/clock.png" alt="Энергетические часы">
            Энергетические часы
        </button>
        <button class="btn" onclick="openGame('dowsing2')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/water.png" alt="Биолокация 2.0">
            Биолокация 2.0
        </button>
        <button class="btn" onclick="openGame('meditation')">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/meditation.png" alt="Медитация">
            Медитация
        </button>
        <button class="btn" onclick="openStats()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/statistics.png" alt="Статистика">
            Статистика
        </button>
        <button class="btn" onclick="openAchievements()">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/trophy.png" alt="Достижения">
            Достижения
        </button>
    </div>

    <!-- Игры -->
    <!-- Орел и решка -->
    <div id="coin" class="game-window">
        <div class="game-content active">
            <h2>Орел и решка</h2>
            <p>Предскажите результат подбрасывания монеты:</p>
            <div class="coin-container">
                <div class="coin" id="coin-element">
                    <div class="front">О</div>
                    <div class="back">Р</div>
                </div>
                <div class="coin-buttons">
                    <button class="btn" onclick="flipCoin('орел')">Орел</button>
                    <button class="btn" onclick="flipCoin('решка')">Решка</button>
                </div>
            </div>
            <button class="btn close-btn" onclick="closeGame('coin')">Закрыть</button>
        </div>
    </div>

    <!-- Энергетические часы -->
    <div id="clock" class="game-window">
        <div class="game-content active">
            <h2>Энергетические часы</h2>
            <p>Остановите стрелку на красной метке силой мысли:</p>
            <div class="clock-container">
                <div class="clock-face">
                    <div class="clock-target"></div>
                    <div class="clock-hand" id="clock-hand"></div>
                    <div class="clock-center"></div>
                </div>
            </div>
            <button class="btn clock-btn" id="clock-btn" onclick="stopClock()">Остановить</button>
            <button class="btn close-btn" onclick="closeGame('clock')">Закрыть</button>
        </div>
    </div>

    <!-- Биолокация 2.0 -->
    <div id="dowsing2" class="game-window">
        <div class="game-content active">
            <h2>Биолокация 2.0</h2>
            <p>Найдите источники воды на карте:</p>
            <div class="dowsing2-container">
                <div class="dowsing2-map" id="dowsing2-map"></div>
            </div>
            <button class="btn close-btn" onclick="closeGame('dowsing2')">Закрыть</button>
        </div>
    </div>

    <!-- Медитация-визуализация -->
    <div id="meditation" class="game-window">
        <div class="game-content active">
            <h2>Медитация-визуализация</h2>
            <p>Увеличьте энергетический шар силой мысли:</p>
            <div class="meditation-container">
                <div class="energy-ball" id="energy-ball"></div>
                <div class="energy-level">
                    <div class="energy-fill" id="energy-fill"></div>
                </div>
            </div>
            <button class="btn meditation-btn" id="meditation-btn" onmousedown="startMeditation()" ontouchstart="startMeditation()" onmouseup="stopMeditation()" ontouchend="stopMeditation()">Концентрироваться</button>
            <button class="btn close-btn" onclick="closeGame('meditation')">Закрыть</button>
        </div>
    </div>

    <!-- Другие окна игр... -->

    <script>
        // Общие переменные
        let stats = {
            telepathy: { correct: 0, total: 0 },
            zener: { correct: 0, total: 0 },
            color: { correct: 0, total: 0 },
            telekinesis: { success: 0 },
            dowsing: { found: 0, attempts: 0 },
            coin: { correct: 0, total: 0 },
            clock: { accuracy: 0, attempts: 0 },
            dowsing2: { found: 0, attempts: 0 },
            meditation: { success: 0, attempts: 0 }
        };

        // Игра "Орел и решка"
        function flipCoin(guess) {
            const coin = document.getElementById('coin-element');
            if (coin.classList.contains('flipping')) return;
            
            coin.classList.add('flipping');
            stats.coin.total++;
            
            setTimeout(() => {
                const result = Math.random() < 0.5 ? 'орел' : 'решка';
                const isCorrect = guess === result;
                
                if (isCorrect) {
                    stats.coin.correct++;
                }
                
                setTimeout(() => {
                    showMessage(
                        isCorrect ? '✅ Верно! Выпало: ' + result : '❌ Неверно. Выпало: ' + result,
                        () => coin.classList.remove('flipping')
                    );
                    updateStats();
                    checkAchievements();
                }, 500);
            }, 2000);
        }

        // Игра "Энергетические часы"
        let clockInterval;
        let clockAngle = 0;
        let clockSpeed = 0.05;
        let clockRunning = false;

        function startClock() {
            const hand = document.getElementById('clock-hand');
            const btn = document.getElementById('clock-btn');
            
            clockRunning = true;
            btn.disabled = true;
            clockAngle = 0;
            clockSpeed = 0.02 + Math.random() * 0.03;
            
            clockInterval = setInterval(() => {
                clockAngle += clockSpeed;
                hand.style.transform = `translateX(-50%) rotate(${clockAngle}rad)`;
            }, 16);
            
            setTimeout(() => {
                btn.disabled = false;
            }, 2000);
        }

        function stopClock() {
            if (!clockRunning) return;
            
            clearInterval(clockInterval);
            clockRunning = false;
            stats.clock.attempts++;
            
            const targetAngle = Math.PI / 2; // 90 градусов (верх)
            const diff = Math.abs(clockAngle % (Math.PI * 2) - targetAngle);
            const accuracy = Math.max(0, 100 - Math.floor(diff * 100));
            
            stats.clock.accuracy += accuracy;
            updateStats();
            checkAchievements();
            
            showMessage(`Точность: ${accuracy}%`, startClock);
        }

        // Игра "Биолокация 2.0"
        function initDowsing2() {
            const map = document.getElementById('dowsing2-map');
            map.innerHTML = '';
            
            // Создаем 25 клеток (5x5)
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'dowsing2-cell';
                cell.dataset.index = i;
                
                // Позиционируем клетки
                const row = Math.floor(i / 5);
                const col = i % 5;
                cell.style.left = `${col * 20}%`;
                cell.style.top = `${row * 20}%`;
                
                // 20% шанс, что здесь есть вода
                if (Math.random() < 0.2) {
                    cell.classList.add('water');
                }
                
                cell.addEventListener('click', checkDowsing2Cell);
                map.appendChild(cell);
            }
            
            stats.dowsing2.attempts++;
            updateStats();
        }

        function checkDowsing2Cell(e) {
            const cell = e.target;
            if (cell.classList.contains('selected')) return;
            
            cell.classList.add('selected');
            
            if (cell.classList.contains('water')) {
                cell.classList.add('found');
                stats.dowsing2.found++;
                updateStats();
                checkAchievements();
                showMessage('✅ Найдена вода!');
            }
        }

        // Игра "Медитация-визуализация"
        let meditationInterval;
        let energyLevel = 0;
        let meditationActive = false;

        function startMeditation() {
            if (meditationActive) return;
            
            meditationActive = true;
            const ball = document.getElementById('energy-ball');
            const fill = document.getElementById('energy-fill');
            
            ball.classList.add('growing');
            
            meditationInterval = setInterval(() => {
                if (energyLevel < 100) {
                    energyLevel += 1;
                    fill.style.width = `${energyLevel}%`;
                    
                    // Случайные помехи
                    if (Math.random() < 0.1) {
                        energyLevel = Math.max(0, energyLevel - 5);
                    }
                } else {
                    // Успех
                    clearInterval(meditationInterval);
                    stats.meditation.success++;
                    stats.meditation.attempts++;
                    updateStats();
                    checkAchievements();
                    showMessage('✅ Успех! Вы достигли полной концентрации!', resetMeditation);
                }
            }, 100);
        }

        function stopMeditation() {
            if (!meditationActive) return;
            
            clearInterval(meditationInterval);
            meditationActive = false;
            const ball = document.getElementById('energy-ball');
            ball.classList.remove('growing');
            
            if (energyLevel < 100) {
                stats.meditation.attempts++;
                updateStats();
                showMessage(`Уровень энергии: ${energyLevel}%`, resetMeditation);
            }
        }

        function resetMeditation() {
            energyLevel = 0;
            document.getElementById('energy-fill').style.width = '0%';
        }

        // Общие функции управления играми
        function openGame(gameId) {
            document.querySelector('.container').style.display = 'none';
            document.getElementById('overlay').style.display = 'block';
            document.getElementById(gameId).style.display = 'block';
            
            switch(gameId) {
                case 'clock':
                    startClock();
                    break;
                case 'dowsing2':
                    initDowsing2();
                    break;
                case 'meditation':
                    resetMeditation();
                    break;
            }
        }

        function closeGame(gameId) {
            document.getElementById(gameId).style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
            document.querySelector('.container').style.display = 'block';
            
            // Остановка всех игровых процессов
            if (gameId === 'clock' && clockRunning) {
                clearInterval(clockInterval);
                clockRunning = false;
            }
            if (gameId === 'meditation' && meditationActive) {
                stopMeditation();
            }
        }

        // Остальные функции (showMessage, updateStats, checkAchievements и т.д.)
        // ... (остаются без изменений из предыдущего кода)
    </script>
</body>
</html>